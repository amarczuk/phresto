<?phpclass logoutView extends AjaxView {	protected $module = 'user';	protected function _prepare() {		global $User;		$this->setModule();			$User->logout();		if ( !isset( $_GET['id'] ) ) {			$out = array( 'run' => array( 'location.reload();' ) );		} else {			$project = new Project( null, $_GET['id'] );			if ( !$project->isVisible() ) {				$out = array( 'run' => array( 'location.href="/locked";' ) );			} else {				$unlock = ( $project->isEditable() ) ? 'true' : 'false';				$out = array( 'run' => array( 'phpfy.Code.loadUser( $(\'#drop_login\'), ' . $unlock . ' );') );				}		}				$this->config->Templ->Add( 'inline', json_encode($out) );    }};