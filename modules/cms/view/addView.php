<?phpclass addView extends MixedView {	protected $module = 'cms';	protected function _prepare() {			global $User;		$this->setModule();		if ( !$User->isSu() ) {			Misc::Load( '/404' );		}		$cat = new CmsCategory( null, [ 'url' => $_GET['cat'] ] );		if ( isset( $_POST['url'] ) ) {			$art = new Cms();			$art->url = $_POST['url'];			$art->title = $_POST['title'];			$art->content = $_POST['content'];			$art->categoryid = $cat->id;			$art->lang = 'en';			$art->status = isset( $_POST['status'] ) ? 1 : 0;			$out = $art->save();			if ( $out !== true ) {				$this->config->Templ->Add( 'inline', $out );			} else {				Misc::Load( '/cms/edit/' . $art->title );			}		}		if ( $this->isAjax ) {			$this->config->Templ->Add( 'add', [ 'catid' => $cat->id ] );			$this->config->Templ->AddScript( 'inline_js', '$( ".mixedlink" ).addClass( "ajaxbutton" );' );		} else {			$cms = new Cms();			$arts = $cms->getFromCategory( $cat->id, false );			$this->config->Templ->Add( 'category', array_merge( $cat->_properties, [ 'arts' => $arts, 'cmsPageTmpl' => 'add', 'su' => 1, 'caturl' => $cat->url ] ) );		}				$this->config->Templ->AddScript( 'inline_js', 'CKEDITOR.inline( "cmsArtContent" );' );	}}  